<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Q&A</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="/css/style.css">

</head>
<body>
<header>
    <div class="float-start">
        <img src="/img/logo.jpg" class="rounded" alt="Profile Image">
    </div>
    <div class="float-end">
        <h4>Danh sách giao dịch nhà đất</h4>
    </div>
</header>
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow bg-body-tertiary rounded">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/">Trang chủ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/create">(+) Thêm mới</a>
                </li>
                <li class="nav-item">
                    <span th:if="${message != null}" style="color: lawngreen; font-weight: bold"
                          th:text="${message}"></span>
                </li>
            </ul>
            <form class="d-flex" method="get" action="/search">
                <label>
                    <select class="form-select" name="type" style="width: 200px">
                        <option selected th:value="null">-- Chọn loại bất động sản --</option>
                        <option th:value="'Đất'" th:text="'Đất'"></option>
                        <option th:value="'Nhà đất'" th:text="'Nhà đất'"></option>
                    </select>
                </label>
                <input class="form-control me-2" type="search" placeholder="Tên khách hàng" aria-label="Search"
                       name="search">
                <button class="btn btn-outline-success" type="submit"
                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: 100px; --bs-btn-font-size: .90rem;">
                    Tìm kiếm
                </button>
            </form>
        </div>
    </div>
</nav>
<main>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">Mã giao dịch</th>
            <th scope="col">Tên khách hàng</th>
            <th scope="col">Ngày giao dịch</th>
            <th scope="col">Loại dịch vụ</th>
            <th scope="col">Đơn giá (VND/m2)</th>
            <th scope="col">Diện tích (m2)</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody class="table-group-divider">
        <tr th:each="deal : ${dealList}">
            <th th:text="${deal.id}"></th>
            <td th:text="${deal.customer.name}"></td>
            <td th:text="${deal.dealDate}"></td>
            <td th:text="${deal.dealType}"></td>
            <td th:text="${#numbers.formatDecimal(deal.cost, 0, 'COMMA', 2, 'POINT')}"></td>
            <td th:text="${deal.area}"></td>
            <td>
                <a th:href="@{/{id}/detail(id = ${deal.id})}">
                    Chi tiết
                </a>
            </td>
        </tr>
        </tbody>
    </table>
    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <a href="" id="delRef">
                        <button type="button" class="btn btn-primary">Delete</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
<script>
    $('document').ready(function () {
        $('table #deleteButton').on('click', function (event) {
            event.preventDefault();
            var href = $(this).attr('href');
            $('#deleteModal #delRef').attr('href', href);
            $('#deleteModal').modal();
        });
    });
</script>
</html>